<!DOCTYPE html>
<html>

<head>
	<title>CPSC 362 Generic RPG</title>
	<style type="text/css">
		select		{position:absolute}
		input		{position:absolute}
		span		{position: absolute}
		div.clear	{position: absolute;
				 cursor: default;
				 border-style: none;
				 border-width: 0px;
				 border-color: black} 
		div.box		{position: absolute;
				 cursor: default;
				 border-style: solid;
				 border-width: 2px;
				 border-color: black}
	</style>
	<script>
		<!--
		var Tabs = ["Main", "Splash", "AccountView"];
		var GameTabs = ["Character", "Inventory", "Spells", "Shop"];
		var User;
		var Pass;
		var CharID;
		var Box;
		var SessionKey;
		var SelectedChar = 0;
		var MaxChar = 5;		
		var ResponseArray = [];
		var Me;
		var Players = [];
		var Enemies = [];
		var Equipped = [];
		var Inventory = [];
		var Spells = [];
		var CommandsIn = [];
		var SiteURL="http://www.ctr-online.com/cgi-bin/accman.cgi";
		var Key = 0;
		var Value = 1;
		var MoveStep = 5;
		var MapTiles = [];
		var PlayerTiles = [];
		var EnemyTiles = [];
		var BackgroundTimer = false;
		var NextCommandIn = true;
		var MapPos = {'MaxX' : 0, 'MaxY' : 0, 'MinX' : 0, 'MinY' : 0, 'X' : 0, 'Y' : 0 };
		var Map;
		var MapBool;
		
		function EntityClass(){
			this.ID = 0;  //Use Box here
			this.MaxInt = 0;
			this.MaxStr = 0;
			this.MaxAgi = 0;
			this.MaxCon = 0;
			this.MaxSpd = 0;
			this.MaxCha = 0;
			this.MaxEnd = 0;
			this.MaxHealth = 0;
			this.MaxMana = 0;
			this.MaxAtt = 0;
			this.MaxDef = 0;
			this.MaxACD = 0;
			this.MaxMCD = 0;
			
			this.CurInt = 0;
			this.CurStr = 0;
			this.CurAgi = 0;
			this.CurCon = 0;
			this.CurSpd = 0;
			this.CurCha = 0;
			this.CurEnd = 0;
			this.CurHealth = 0;
			this.CurMana = 0;
			this.CurAtt = 0;
			this.CurDef = 0;
			this.CurACD = 0;
			this.CurMCD = 0;	
			
			this.Level = 0;
			this.Exp = 0;
			this.Gold = 0;
			this.X = 0;
			this.Y = 0;
			this.Name = " ";
			this.Race = " ";
			this.Class = " ";
			this.Sex = " ";
		}
		
		function ItemClass(){
			this.ItemID = 0;
			this.Name = " ";
			this.Description = " ";
			this.Rarity = " ";
			this.Type = " ";
			this.Range = 0;
			this.Value = 0;
			this.StatEffect = " ";
		}
		
		function SpellClass(){
			this.SpellID = 0;
			this.Name = " ";
			this.Description =" ";
			this.ManaCost = 0;
		}		
				
		function Debug(DebugValue){
			document.getElementById("DebugDiv").innerText += DebugValue;
		}
				
		document.addEventListener("keydown", function (e) {
			if (e.keyCode == '37') {MoveMe(-1,0);}
			if (e.keyCode == '38') {MoveMe(0,-1);}
			if (e.keyCode == '39') {MoveMe(1,0);}
			if (e.keyCode == '40') {MoveMe(0,1);}			
		});
		
		function Setup(){
			SetDiv("Splash");
			HideAllChars();
			SessionKey = "sdfsd";
			for (var ii = 0; ii < 19; ii++){ 
				if (ii < 16) MapTiles[ii] = new Image();
				if (ii < 4) PlayerTiles[ii] = new Image();
				EnemyTiles[ii] = new Image();
			}
			MapTiles[0].src = 'images/forest.png';
			MapTiles[1].src = 'images/forest.png';    		//Forest
			MapTiles[2].src = 'images/orangedesert.png';  		//Desert
			MapTiles[3].src = 'images/forest.png';			//Shallow Water
			MapTiles[4].src = 'images/greengrassland.png';		//Grassland
			MapTiles[5].src = 'images/trail.png';			//Trail
			MapTiles[6].src = 'images/whitefloor.png';		//White Floor
			MapTiles[7].src = 'images/yellowgrassland.png';		//Hill
			MapTiles[8].src = 'images/yellowdesert.png';		//Snow
			MapTiles[9].src = 'images/forest.png';			
			MapTiles[10].src = 'images/forest.png';		
			MapTiles[11].src = 'images/water.png';			//Deep Water
			MapTiles[12].src = 'images/whitewall.png';		//White Wall
			MapTiles[13].src = 'images/whitewall.png';		//Tree     -NO
			MapTiles[14].src = 'images/water.png';			//Mountain -NO
			MapTiles[15].src = 'images/forest.png';
			
			EnemyTiles[0].src = 'images/cockroach.png';
			EnemyTiles[1].src = 'images/deadtree.png';
			EnemyTiles[2].src = 'images/dragon.png';
			EnemyTiles[3].src = 'images/elf.png';
			EnemyTiles[4].src = 'images/frog.png';
			EnemyTiles[5].src = 'images/grubat.png';
			EnemyTiles[6].src = 'images/hedgehog.png';
			EnemyTiles[7].src = 'images/horseman.png';
			EnemyTiles[8].src = 'images/kong.png';
			EnemyTiles[9].src = 'images/landshark.png';
			EnemyTiles[10].src = 'images/leviathan.png';
			EnemyTiles[11].src = 'images/madhatter.png';
			EnemyTiles[12].src = 'images/madmouse.png';
			EnemyTiles[13].src = 'images/magician.png';
			EnemyTiles[14].src = 'images/miner.png';
			EnemyTiles[15].src = 'images/mole.png';
			EnemyTiles[16].src = 'images/orc.png';
			EnemyTiles[17].src = 'images/skeleton.png';
			EnemyTiles[18].src = 'images/zombie.png';

			PlayerTiles[0].src = 'images/fighter.png';
			PlayerTiles[1].src = 'images/mage.png';
			PlayerTiles[2].src = 'images/ranger.png';
			PlayerTiles[3].src = 'images/thief.png';
									
			Map = createArray(100,100);
			MapBool = createArray(100,100);
			for (var i = 0; i < 100; i++){
				for (var j = 0; j < 100; j++){
					Map[i][j] = -2;
					MapBool[i][j] = 0;
				}
			}
			
			Me = new EntityClass();
			
			window.setInterval(BackgroundUpdate, 500);
		}  
				
		function BackgroundUpdate(){
			Debug(".");
			if (BackgroundTimer){
				Send("?Op=Update&u=" + User + "&p=" + Pass + "&c=" + CharID + "&b=" + Box + "&s=" + SessionKey);
			}
			ProcessCommands();
		}
				
		function Send(Message){Debug(" -> ");
			var xhttp;
			xhttp = new XMLHttpRequest();
			xhttp.onreadystatechange = function() {
				if (xhttp.readyState === 4 && xhttp.status === 200) {
					ParseResponse(xhttp);
				}
			};			
			xhttp.open("POST", SiteURL, true);
			xhttp.timeout = 1500;
			xhttp.ontimeout = function () {Send(Message);};
			xhttp.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
			xhttp.send(Message);
		}
		
		function GetPlot(X,Y){
			Debug("GP");
			Send("?Op=Play&Action=GetPlot&X=" + X + "&Y=" + Y + "&c=" + CharID + "&b=" + Box + "&s=" + SessionKey);
		}
		
		function ProcessCommands(){
			if (NextCommandIn){
				NextCommandIn = false;
				
				if (CommandsIn.length > 0) {
					LoadKeys(CommandsIn.shift());
						
					var Op = GetValueFromKey("Op");
					
					if (Op == "Login"){LoginResponse();}
					if (Op == "NewCharacter"){CreateResponse();}
					if (Op == "DeleteCharacter"){DeleteResponse();}
					if (Op == "EnterGame"){EnterGameResponse();}
					if (Op == "Play"){CheckFail();}
					if (Op == "Update"){CheckFail();}
					if (Op == "MapPlot"){
						FillMap(GetValueFromKey("Plot"), parseInt(GetValueFromKey("X")), parseInt(GetValueFromKey("Y")));
					}
					if (Op == "MyPosition"){SetMyPosition();}
					if (Op == "Con"){
						document.getElementById("Con").innerHTML += GetValueFromKey("Message");
					}
					if (Op == "UpdateChar"){UpdateChar();}
					//if (Op == "PlayerMove"){PlayerMove();}
				}
				NextCommandIn = true;
			}
		}
		
		function PlayerMove(){
			if (Me.ID == parseIntGetValueFromKey("b")){
/*				Me.X += parseInt(GetValueFromKey("X"));
				Me.Y += parseInt(GetValueFromKey("Y"));
				MapPos.X -= parseInt(GetValueFromKey("X"));
				MapPos.Y -= parseInt(GetValueFromKey("Y"));
				document.getElementById("MapImageDiv").style.left = (MapPos.X * 50) + "px";
				document.getElementById("MapImageDiv").style.top = (MapPos.Y * 50) + "px";
				document.getElementById("MeDiv").style.left = (Me.X * 50) + "px";
				document.getElementById("MeDiv").style.top = (Me.Y * 50) + "px";	*/			
			} else {
				var Who = GetPlayerByBox(GetValueFromKey("b"));
				Players[Who].X += parseInt(GetValueFromKey("X"));
				Players[Who].Y += parseInt(GetValueFromKey("Y"));
				document.getElementById("_" + GetValueFromKey("b")).style.left = (Players[Who].X * 50) + 'px';
				document.getElementById("_" + GetValueFromKey("b")).style.top = (Players[Who].Y * 50) + 'px';
			}
		}
		
		function UpdateChar(){
			if (GetValueFromKey("b") == Box){
				Me.ID = parseInt(GetValueFromKey("b"));
				Me.MaxInt = parseInt(GetValueFromKey("mInt"));
				Me.MaxStr = parseInt(GetValueFromKey("mStr"));
				Me.MaxAgi = parseInt(GetValueFromKey("mAgi"));
				Me.MaxCon = parseInt(GetValueFromKey("mCon"));
				Me.MaxSpd = parseInt(GetValueFromKey("mSpd"));
				Me.MaxCha = parseInt(GetValueFromKey("mCha"));
				Me.MaxEnd = parseInt(GetValueFromKey("mEnd"));
				Me.MaxHealth = parseInt(GetValueFromKey("mHea"));
				Me.MaxMana = parseInt(GetValueFromKey("mMan"));
				Me.MaxAtt = parseInt(GetValueFromKey("mAtt"));
				Me.MaxDef = parseInt(GetValueFromKey("mDef"));
				Me.MaxACD = parseInt(GetValueFromKey("mACD"));
				Me.MaxMCD = parseInt(GetValueFromKey("mMCD"));
				
				Me.CurInt = parseInt(GetValueFromKey("cInt"));
				Me.CurStr = parseInt(GetValueFromKey("cStr"));
				Me.CurAgi = parseInt(GetValueFromKey("cAgi"));
				Me.CurCon = parseInt(GetValueFromKey("cCon"));
				Me.CurSpd = parseInt(GetValueFromKey("cSpd"));
				Me.CurCha = parseInt(GetValueFromKey("cCha"));
				Me.CurEnd = parseInt(GetValueFromKey("cEnd"));
				Me.CurHealth = parseInt(GetValueFromKey("cHea"));
				Me.CurMana = parseInt(GetValueFromKey("cMan"));
				Me.CurAtt = parseInt(GetValueFromKey("cAtt"));
				Me.CurDef = parseInt(GetValueFromKey("cDef"));
				Me.CurACD = parseInt(GetValueFromKey("cACD"));
				Me.CurMCD = parseInt(GetValueFromKey("cMCD"));	
				
				Me.Level = parseInt(GetValueFromKey("Level"));
				Me.Exp = parseInt(GetValueFromKey("Exp"));
				Me.Gold = parseInt(GetValueFromKey("Gold"));
				Me.X = parseInt(GetValueFromKey("X"));
				Me.Y = parseInt(GetValueFromKey("Y"));
				Me.Name = GetValueFromKey("Name");
				Me.Race = GetValueFromKey("Race");
				Me.Class = GetValueFromKey("Class");
				Me.Sex = GetValueFromKey("Sex");
				Me.X = 8;
				Me.Y = 8;
// 				if (Me.Class == "Fighter") document.getElementById("MeImg").src = PlayerTiles[0].src;
// 				if (Me.Class == "Mage") document.getElementById("MeImg").src = PlayerTiles[1].src;
// 				if (Me.Class == "Ranger") document.getElementById("MeImg").src = PlayerTiles[2].src;
// 				if (Me.Class == "Thief") document.getElementById("MeImg").src = PlayerTiles[3].src;
			} else {
				TempEntity = new EntityClass();
				TempEntity.ID = stoi(GetValueFromKey("b"));
				TempEntity.MaxInt = stoi(GetValueFromKey("mInt"));
				TempEntity.MaxStr = stoi(GetValueFromKey("mStr"));
				TempEntity.MaxAgi = stoi(GetValueFromKey("mAgi"));
				TempEntity.MaxCon = stoi(GetValueFromKey("mCon"));
				TempEntity.MaxSpd = stoi(GetValueFromKey("mSpd"));
				TempEntity.MaxCha = stoi(GetValueFromKey("mCha"));
				TempEntity.MaxEnd = stoi(GetValueFromKey("mEnd"));
				TempEntity.MaxHealth = stoi(GetValueFromKey("mHea"));
				TempEntity.MaxMana = stoi(GetValueFromKey("mMan"));
				TempEntity.MaxAtt = stoi(GetValueFromKey("mAtt"));
				TempEntity.MaxDef = stoi(GetValueFromKey("mDef"));
				TempEntity.MaxACD = stoi(GetValueFromKey("mACD"));
				TempEntity.MaxMCD = stoi(GetValueFromKey("mMCD"));
				
				TempEntity.CurInt = stoi(GetValueFromKey("cInt"));
				TempEntity.CurStr = stoi(GetValueFromKey("cStr"));
				TempEntity.CurAgi = stoi(GetValueFromKey("cAgi"));
				TempEntity.CurCon = stoi(GetValueFromKey("cCon"));
				TempEntity.CurSpd = stoi(GetValueFromKey("cSpd"));
				TempEntity.CurCha = stoi(GetValueFromKey("cCha"));
				TempEntity.CurEnd = stoi(GetValueFromKey("cEnd"));
				TempEntity.CurHealth = stoi(GetValueFromKey("cHea"));
				TempEntity.CurMana = stoi(GetValueFromKey("cMan"));
				TempEntity.CurAtt = stoi(GetValueFromKey("cAtt"));
				TempEntity.CurDef = stoi(GetValueFromKey("cDef"));
				TempEntity.CurACD = stoi(GetValueFromKey("cACD"));
				TempEntity.CurMCD = stoi(GetValueFromKey("cMCD"));	
				
				TempEntity.Level = stoi(GetValueFromKey("Level"));
				TempEntity.Exp = stoi(GetValueFromKey("Exp"));
				TempEntity.Gold = stoi(GetValueFromKey("Gold"));
				TempEntity.X = stoi(GetValueFromKey("X"));
				TempEntity.Y = stoi(GetValueFromKey("Y"));
				TempEntity.Name = GetValueFromKey("Name");
				TempEntity.Race = GetValueFromKey("Race");
				TempEntity.Class = GetValueFromKey("Class");
				TempEntity.Sex = GetValueFromKey("Sex");
				
				Players.push(TempEntity);
				
				var NewImg = document.createElement("img");
				NewImg.setAttribute("id", "_" + TempEntity.ID);
				NewImg.style.position = 'absolute';
				NewImg.style.left = (TempEntity.X * 50) + 'px';
				NewImg.style.top = (TempEntity.Y * 50) + 'px';
				
				if (TempEntity.Class == "Fighter") NewImg.setAttribute("src", PlayerTiles[0].src);
				if (TempEntity.Class == "Mage") NewImg.setAttribute("src", PlayerTiles[1].src);
				if (TempEntity.Class == "Ranger") NewImg.setAttribute("src", PlayerTiles[2].src);
				if (TempEntity.Class == "Thief") NewImg.setAttribute("src", PlayerTiles[3].src);
				document.getElementById("EnemyDiv").appendChild(NewTile);
			}
		}
		
		function GetPlayerByBox(Box){
			for (var i = 0; i < Players.length; i++){
				if (Players[i].ID == Box) return i;
			}
		}
		
		function SetMyPosition(){
			Me.X = parseInt(GetValueFromKey("X"));
			Me.Y = parseInt(GetValueFromKey("Y"));
			MapPos.X = Me.X - 9;
			MapPos.Y = Me.Y - 9;
			ShowMeOnMap();	
			document.getElementById("MeDiv").style.left = (Me.X * 50) + 'px';
			document.getElementById("MeDiv").style.top = (Me.Y * 50) + 'px';
		}
					
		function SetDiv(WhichDiv){
			HideAllChars();
			for (var i = 0, len = Tabs.length; i < len; i++) {
				document.getElementById(Tabs[i]).style.visibility = 'hidden';
			}
			document.getElementById(WhichDiv).style.visibility = 'visible';
		}
		
		function Toggle(Div1){
			if (document.getElementById(Div1).style.visibility == 'visible'){
				document.getElementById(Div1).style.visibility = 'hidden';
			} else {
				document.getElementById(Div1).style.visibility = 'visible';
			}
		}
		
		function Login(Op){
			User = document.getElementById("u").value;
			Pass = document.getElementById("p").value;
			if (User.length < 4) {alert("Username too short"); return;}
			if (Pass.length < 4) {alert("Password too short"); return;}
			
			Send("?Op=" + Op + "&u=" + User + "&p=" + Pass);
		}
		
		function SetTargetBox(EntityType, EntityID){
			TempEntity = GetEntity(EntityType, EntityID);
			document.getElementById("NameField").innerHTML = TempEntity.Name;
			document.getElementById("LevelField").innerHTML = TempEntity.Level;
			document.getElementById("AttackField").innerHTML = (TempEntity.Att == 0) ? "???" : TempEntity.Att;
			document.getElementById("DefenseField").innerHTML = (TempEntity.Def == 0) ? "???" : TempEntity.Def;
			document.getElementById("HealthField").innerHTML = TempEntity.CurHealth + " / " + TempEntity.MaxHealth;
			document.getElementById("ManaField").innerHTML = TempEntity.CurMana + " / " + TempEntity.MaxMana;
			document.getElementById("TargetBox").style.visibility = 'visible';
		}
		
		function GetEntity(EntityType, EntityID){
			RetVal = new EntityClass();
			if (EntityType == "Player"){
				for (var k = 0; k < Players.length; k++){
					if (Players[k].ID == EntityID){
						RetVal.Name = Players[k].Name;
						RetVal.Level = Players[k].Level;
						RetVal.Att = Players[k].Att;
						RetVal.Def = Players[k].Def;
						RetVal.CurHealth = Players[k].CurHealth;
						RetVal.MaxHealth = Players[k].MaxHealth;
						RetVal.CurMana = Players[k].CurMana;
						RetVal.MaxMana = Players[k].MaxMana;
					}
				}
			} else {
				for (var k = 0; k < Enemies.length; k++){
					if (Enemies[k].ID == EntityID){
						RetVal.Name = Enemies[k].Name;
						RetVal.Level = Enemies[k].Level;
						RetVal.Att = Enemies[k].Att;
						RetVal.Def = Enemies[k].Def;
						RetVal.CurHealth = Enemies[k].CurHealth;
						RetVal.MaxHealth = Enemies[k].MaxHealth;
						RetVal.CurMana = Enemies[k].CurMana;
						RetVal.MaxMana = Enemies[k].MaxMana;
					}
				}
			}
			return RetVal;
		}
		
		function ClearTargetBox(){
			document.getElementById("TargetBox").style.visibility = 'hidden';
		}
		
		function LoginResponse(){
			if (GetValueFromKey("Status") == "Fail"){
				alert(GetValueFromKey("Reason"));
				return;
			}
			
			//If login is successful set up the logged in name at the top of the page.
			document.getElementById("LoginStatus").innerText = User;
			
			//Switch to the character management page.
			SetDiv("AccountView");
			
			//On success, will load all characters that exist for player.  The next byte is the count of characters.  (5 max)
			for (var i = 1; i < 6; i++){
				if (GetValueFromKey("c" + i) != "Not Found"){
					document.getElementById("char" + i).style.visibility = "visible";
					document.getElementById("charID" + i).value = GetValueFromKey("c" + i);
					document.getElementById("name" + i).innerText = GetValueFromKey("Name" + i);
					document.getElementById("level" + i).innerText = GetValueFromKey("Level" + i);
					document.getElementById("race" + i).innerText = GetValueFromKey("Race" + i);					
					document.getElementById("class" + i).innerText = GetValueFromKey("Class" + i);
				}
			}
		}
		
		function ParseResponse(xhttp){
			var Response = xhttp.responseText;
			
			var Temp = Response.split("^");
			for (var iPR2 = 0; iPR2 < Temp.length; iPR2++) {
				if (Temp[iPR2].length > 2) {CommandsIn.push(Temp[iPR2]);}
			}
		}
		
		function LoadKeys(Response){
			ResponseArray = [];
			
			var Temp = Response.split("&");
			for (var iLK2 = 0; iLK2 < Temp.length; iLK2++) {
				if (Temp[iLK2].length > 2) {ResponseArray.push(Temp[iLK2].split("="));}
			}
		}
		
		function GetValueFromKey(SearchKey){
			for (var i = 0; i < ResponseArray.length; i++) {
				if (ResponseArray[i][Key] == SearchKey) {
					return ResponseArray[i][Value];
				}
			}
			return "Not Found";
		}
		
		function HideAllChars(){
			for (var i = 1; i < 6; i++){
				document.getElementById("char" + i).style.backgroundColor = "transparent";
				document.getElementById("char" + i).style.visibility = "hidden";
				document.getElementById("charID" + i).value = "";
				document.getElementById("name" + i).innerText = "";
				document.getElementById("level" + i).innerText = "";
				document.getElementById("race" + i).innerText = "";
				document.getElementById("class" + i).innerText = "";
				SelectedChar = 0;
			}
		}
		
		function SetChar(num){
			for (var i = 1; i < 6; i++){
				document.getElementById("char" + i).style.backgroundColor = "transparent";
			}
			document.getElementById("char" + num).style.backgroundColor = "#dcd6ff";
			SelectedChar = num;
			CharID = document.getElementById("charID" + num).value;
		}
		
		function EnterGame(){
			Send("?Op=EnterGame&Action=EnterGame&u=" + User + "&p=" + Pass + "&c=" + CharID + "&s=" + SessionKey);	
		}
		
		function EnterGameResponse(){
			if (GetValueFromKey("Status") === "Success"){
				SetDiv("Main");
				Box = GetValueFromKey("Box");
				BackgroundTimer = true;	
				for (var i = 0; i < 5; i++){
					for (var j = 0; j < 5; j++){
						GetPlot(i*20,j*20);
					}
				}				
			}
		}
		
		function CheckFail(){
			if (GetValueFromKey("Status") === "Fail"){alert(GetValueFromKey("Reason"));}
		}
		
		function ShowMeOnMap(){
			var TopCornerX = -((Me.X - 9) * 50);
			var TopCornerY = -((Me.Y - 9) * 50);
			var XDiff = (TopCornerX - MapPos.X) / MoveStep;
			var YDiff = (TopCornerY - MapPos.Y) / MoveStep;
			//window.setTimeout(MoveMap(TopCornerX,TopCornerY, XDiff, YDiff, MoveStep), 100);
			document.getElementById("MapImageDiv").style.left = TopCornerX;
			document.getElementById("MapImageDiv").style.top = TopCornerY;
		}
		
		function AddTile(NewX, NewY){
			var NewTile = document.createElement("img");
			NewTile.setAttribute("id", "_" + NewX + "_" + NewY);
			NewTile.setAttribute("src", MapTiles[Map[NewX][NewY]].src);
			NewTile.style.position = 'absolute';
			NewTile.style.left = (NewX * 50) + 'px';
			NewTile.style.top = (NewY * 50) + 'px';
			document.getElementById("MapTilesDiv").appendChild(NewTile);
		}
		
		function MoveMap(NewX,NewY, XInc, YInc, Count){
			var MapImage = document.getElementById("MapImageDiv");
			var MeImage = document.getElementById("MeDiv");
			
			if (Count === 0 || (NewX = MapImage.style.left && NewY - MapImage.style.top)) {
				MapImage.style.left = NewX + "px";
				MapImage.style.top = NewY + "px";
				MeImage.style.left = NewX + (9 * 50) + "px";
				MeImage.style.top = NewY + (9 * 50) + "px";
			} else {
				MapImage.style.left = (parseInt(MapImage.style.left) + XInc) + "px";
				MapImage.style.top = (parseInt(MapImage.style.top) + YInc) + "px";
				MeImage.style.left = (parseInt(MeImage.style.left) - XInc) + "px";
				MeImage.style.top = (parseInt(MeImage.style.top) - YInc) + "px";
				window.setTimeout(MoveMap(NewX,NewY, XInc, YInc, Count - 1), 100);
			}	
		}
		
		function FillMap(Plot, X, Y){
			var Slot = 0;
			for (var i = X; i < X + 20; i++){Debug("=");
				for (var j = Y; j < Y + 20; j++){Debug("+");
					Map[i][j] = parseInt(Plot.substr(Slot,2));
					Slot += 2;
					if (MapBool[i][j] === 0) {
						AddTile(i,j);
						MapBool[i][j] = 1;
					}
				}
			}
		}
		
		function NewCharacter(){
			document.getElementById("NewChar").style.visibility = "visible";
		}
		
		function DeleteCharacter(){
			if (SelectedChar === 0) {alert("No character selected."); return;}
			var conf = confirm("Are you sure you want to delete this character?");
			if (conf === false) {return;}		
			
			CharID = document.getElementById("charID" + SelectedChar).value;
			Send("?Op=DeleteCharacter&u=" + User + "&p=" + Pass + "&c=" + CharID);

		}
		
		function DeleteResponse () {
			if (GetValueFromKey("Status") == "Fail"){
				alert(GetValueFromKey("Reason"));
				return;
			}
			HideAllChars();
			Login('Login');			
		}
		
		function Logout(){
			var conf = confirm("Are you sure you want to logout?");
			if (conf === true) {
				SetDiv("Splash");
				document.getElementById("u").value = "";
				document.getElementById("p").value = "";
				HideAllChars();
			}
		}
		
		function Cancel(){
			document.getElementById("NewChar").style.visibility = "hidden";
		}
		
		function Rand(High, Low){
			return parseInt((Math.random() * High % (High - Low + 1) + Low));
		}
		
		function RollStats(){
			var Int = Rand(6,1) + Rand(6,1) + Rand(6,1);
			var Str = Rand(6,1) + Rand(6,1) + Rand(6,1);
			var Agi = Rand(6,1) + Rand(6,1) + Rand(6,1);
			var Con = Rand(6,1) + Rand(6,1) + Rand(6,1);
			var Spd = Rand(6,1) + Rand(6,1) + Rand(6,1);
			var Cha = Rand(6,1) + Rand(6,1) + Rand(6,1);
			var End = Rand(6,1) + Rand(6,1) + Rand(6,1);
			
			document.getElementById("charInt").value = Int;
			document.getElementById("charStr").value = Str;
			document.getElementById("charAgi").value = Agi;
			document.getElementById("charCon").value = Con;
			document.getElementById("charSpd").value = Spd;
			document.getElementById("charCha").value = Cha;
			document.getElementById("charEnd").value = End;
			
			document.getElementById("charHealth").value = parseInt(10 + (Con * 0.8) + (End * 0.7) + (Str * 0.3));
			document.getElementById("charMana").value = parseInt(10 + (Int * 0.8) + (End * 0.5));
			document.getElementById("charAttack").value = parseInt(10 + (Str * 0.9) + (Agi * 0.3) + (Spd * 0.5) + (End * 0.4));
			document.getElementById("charDefense").value = parseInt(10 + (Con * 0.8) + (Agi * 0.5) + (Spd * 0.3) + (End * 0.5));
			document.getElementById("charACD").value = parseInt(100 - (100 * (Spd/60)) - (100 * (End/90)) - (100 * (Agi/60)));
			document.getElementById("charMCD").value = parseInt(100 -  (100 * (Spd/60)) - (100 * (Int/90)));
		}
		
		function Create(){
			User = document.getElementById("u").value;
			Pass = document.getElementById("p").value;
			CharID = GetNewID();
			var Name = document.getElementById("charName").value;
			var Class = document.getElementById("charClass").value;
			var Race = document.getElementById("charRace").value;
			var Sex = document.getElementById("charSex").value;
			var Level = 1;
			var Int = document.getElementById("charInt").value;
			var Str = document.getElementById("charStr").value;
			var Agi = document.getElementById("charAgi").value;
			var Con = document.getElementById("charCon").value;
			var Spd = document.getElementById("charSpd").value;
			var Cha = document.getElementById("charCha").value;
			var End = document.getElementById("charEnd").value;

			if (Name === "") {alert ("Must specify a name for the character."); return;}
			if (Int === "") {alert ("Must roll for chracter traits."); return;}
						
			var Operation = "?Op=NewCharacter";
			Operation += "&u=" + User + "&p=" + Pass;
			Operation += "&c=" + CharID + "&Name=" + Name + "&Class=" + Class + "&Race=" + Race + "&Sex=" + Sex + "&Level=" + Level;
			Operation += "&Int=" + Int + "&Str=" + Str + "&Agi=" + Agi + "&Con=" + Con + "&Spd=" + Spd + "&Cha=" + Cha + "&End=" + End;
			Send(Operation);
		}
		
		function ClearChar(){
			document.getElementById("charName").value = "";
			document.getElementById("charClass").value = "Fighter";
			document.getElementById("charRace").value = "Elf";
			document.getElementById("charSex").value = "Male";
			document.getElementById("charInt").value = "";
			document.getElementById("charStr").value = "";
			document.getElementById("charAgi").value = "";
			document.getElementById("charCon").value = "";
			document.getElementById("charSpd").value = "";
			document.getElementById("charCha").value = "";
			document.getElementById("charEnd").value = "";
			
			document.getElementById("charHealth").value = "";
			document.getElementById("charMana").value = "";
			document.getElementById("charAttack").value = "";
			document.getElementById("charDefense").value = "";
			document.getElementById("charACD").value = "";
			document.getElementById("charMCD").value = "";
		}
		
		function CreateResponse(){
			if (GetValueFromKey("Status") == "Fail"){
				alert(GetValueFromKey("Reason"));
				return;
			}
				
			//Add the new character to the list
			var NextSpot = 0;
			for (var i = 5; i > 0; i--){
				if (document.getElementById("char" + i).style.visibility == "hidden") NextSpot = i;
			}
			
			document.getElementById("char" + NextSpot).style.visibility = "visible";
			document.getElementById("charID" + NextSpot).value = CharID;
			document.getElementById("name" + NextSpot).innerText = document.getElementById("charName").value;
			document.getElementById("level" + NextSpot).innerText = "1";
			document.getElementById("race" + NextSpot).innerText = document.getElementById("charRace").value;					
			document.getElementById("class" + NextSpot).innerText = document.getElementById("charClass").value;			
			
			
			//Close the character creation screen80
			Toggle("NewChar");
			ClearChar();
		}
		
		function ToggleCharSheet(){
			document.getElementById("InvSheetBox").style.visibility = 'hidden';
			document.getElementById("SpellSheetBox").style.visibility = 'hidden';
			
			var CurrentState = document.getElementById("CharSheetBox").style.visibility;
			document.getElementById("CharSheetBox").style.visibility = (CurrentState == 'hidden' ? 'visible' : 'hidden');
			document.getElementById("CharNameField").innerHTML = Me.Name;
			document.getElementById("CharSexField").innerHTML = Me.Sex;			
			document.getElementById("CharRaceField").innerHTML = Me.Race;			
			document.getElementById("CharClassField").innerHTML = Me.Class;			
			document.getElementById("CharGoldField").innerHTML = Me.Gold;			
			document.getElementById("CharLevelField").innerHTML = Me.Level;			
			document.getElementById("CharExpField").innerHTML = Me.Exp;			
			document.getElementById("CharIntField").innerHTML = Me.CurInt + " / " + Me.MaxInt;			
			document.getElementById("CharStrField").innerHTML = Me.CurStr + " / " + Me.MaxStr;			
			document.getElementById("CharAgiField").innerHTML = Me.CurAgi + " / " + Me.MaxAgi;			
			document.getElementById("CharConField").innerHTML = Me.CurCon + " / " + Me.MaxCon;
			document.getElementById("CharSpdField").innerHTML = Me.CurSpd + " / " + Me.MaxSpd;			
			document.getElementById("CharChaField").innerHTML = Me.CurCha + " / " + Me.MaxCha;
			document.getElementById("CharEndField").innerHTML = Me.CurEnd + " / " + Me.MaxEnd;
			document.getElementById("CharAttackField").innerHTML = Me.CurAtt + " / " + Me.MaxAtt;			
			document.getElementById("CharDefenseField").innerHTML = Me.CurDef + " / " + Me.MaxDef;
			document.getElementById("CharManaField").innerHTML = Me.CurMana + " / " + Me.MaxMana;
			document.getElementById("CharHealthField").innerHTML = Me.CurHealth + " / " + Me.MaxHealth;
			document.getElementById("CharACDField").innerHTML = Me.MaxACD;
			document.getElementById("CharMCDField").innerHTML = Me.MaxMCD;	
			document.getElementById("CharLeftHandLabel").innerHTML = "";			
			document.getElementById("CharRightHandLabel").innerHTML = "";			
			document.getElementById("CharFeetLabel").innerHTML = "";			
			document.getElementById("CharHeadHandLabel").innerHTML = "";			
			document.getElementById("CharBodyHandLabel").innerHTML = "";			
			document.getElementById("CharLegsHandLabel").innerHTML = "";			
			document.getElementById("CharArmsHandLabel").innerHTML = "";			
		}
		
		function GetNewID(){
			while (true){
				var Found = false;
				var RetVal = Rand(99,1);
				for (var i = 1; i < 6; i++){
					if (GetValueFromKey("c" + i) != "Not Found"){
						if (GetValueFromKey("c" + i) == RetVal){
							Found = true;
						}
					}
				}
				if (!Found) return RetVal;
			}
		}
		
		function MoveMe (XOffset, YOffset){
 			MapPos.X -= XOffset;
 			MapPos.Y -= YOffset;
 			Me.X += XOffset;
 			Me.Y += YOffset;
			
 			document.getElementById("MapImageDiv").style.left = (MapPos.X * 50) + "px";
 			document.getElementById("MapImageDiv").style.top = (MapPos.Y * 50) + "px";
 			document.getElementById("MeDiv").style.left = (Me.X * 50) + "px";
 			document.getElementById("MeDiv").style.top = (Me.Y * 50) + "px";
			
			//Send("?Op=Play&Action=Move&u=" + User + "&p=" + Pass + "&b=" + Box + "&c=" + CharID + "&s=" + SessionKey + "&XMove=" + XOffset + "&YMove=" + YOffset);
		}
		
		function QuitGame(){
			Send("?Op=Play&Action=LeaveGame&u=" + User + "&p=" + Pass + "&b=" + Box + "&c=" + CharID + "&s=" + SessionKey);	
		}
		
		function createArray(length) {
			// This function copied from :
			// http://stackoverflow.com/questions/966225/how-can-i-create-a-two-dimensional-array-in-javascript/966938#966938
			var arr = new Array(length || 0),
			i = length;

			if (arguments.length > 1) {
				var args = Array.prototype.slice.call(arguments, 1);
				while(i--) arr[length-1 - i] = createArray.apply(this, args);
			}

			return arr;
		}
		-->
	</script>
</head>


<body onload="Setup();">
	<div class="clear" style = "top:0%;left:0%;width:100%;height:100%">
		<div id = "Header" class = "clear" style = "top:3%;left:10%;width:80%;height:4%">
			<span style = "top:5%;left:5%;width:50%;height:90%;font-size:2em">Generic RPG</span>
			<div id = "LoginStatus" class = "clear" style = "top:30%;left:75%;width:35%;height:90%;font-size:1.35em">Not Logged In</div>
		</div>

		<div id = "Main" class = "box" style = "top:10%;left:10%;width:80%;height:80%">
			<div id="MapViewPort" class = "clear" style = "top:0%;left0%;width:100%;height:100%;overflow:hidden">
				<div id = "MapImageDiv" class="clear" style="top:0px;left:0px;height:5000px;width:5000px">
					<div id = "MapTilesDiv" class = "clear" style="top:0px;left:0px"></div>
					<div id = "MeDiv" class = "clear" style = "z-index:100"><img id="MeImg" src="/images/mage.png"></div>
					<div id = "EnemyDiv" style="top:0px;left:0px;z-index:100"></div>
					<div id = "OtherPlayerDiv" style="top:0px;left:0px"></div>
				</div>
				
			</div>
			<div id = "CharSheetButton" class = "box" onClick="ToggleCharSheet();" style = 'top:5px;left:6px;width:80px;height:18px;text-align:center;background-color:#d9baff'>Character</div>
			<div id = "CharSheetBox" class = "box" style="top:25px;left:6px;height:300px;width:400px;position:absolute;background-color:#bdd6bc;visibility:hidden">
				<div class = 'clear' id = 'CharNameField' style = 'top:12px;left:18px;width:96px;height:12px'></div>
				<div class = 'clear' id = 'CharSexLabel' style = 'top:30px;left:132px;width:30px;height:12px'>Sex</div>
				<div class = 'clear' id = 'CharSexField' style = 'top:30px;left:192px;width:18px;height:12px'></div>
				<div class = 'clear' id = 'CharRaceLabel' style = 'top:30px;left:18px;width:36px;height:12px'>Race</div>
				<div class = 'clear' id = 'CharRaceField' style = 'top:30px;left:66px;width:36px;height:12px'></div>
				<div class = 'clear' id = 'CharClassLabel' style = 'top:48px;left:132px;width:30px;height:12px'>Class</div>
				<div class = 'clear' id = 'CharClassField' style = 'top:48px;left:192px;width:42px;height:12px'></div>
				<div class = 'clear' id = 'CharGoldLabel' style = 'top:84px;left:18px;width:30px;height:12px'>Gold</div>
				<div class = 'clear' id = 'CharGoldField' style = 'top:84px;left:66px;width:42px;height:12px'></div>
				<div class = 'clear' id = 'CharLevelField' style = 'top:48px;left:66px;width:36px;height:12px'></div>
				<div class = 'clear' id = 'CharLevelLabel' style = 'top:48px;left:18px;width:36px;height:12px'>Level</div>
				<div class = 'clear' id = 'CharExpField' style = 'top:66px;left:192px;width:42px;height:12px'></div>
				<div class = 'clear' id = 'CharExpLabel' style = 'top:66px;left:132px;width:60px;height:12px'>Experience</div>
				<div class = 'clear' id = 'CharBaseAttribLabel' style = 'top:108px;left:18px;width:102px;height:12px'>Base Attributes</div>
				<div class = 'clear' id = 'CharIntField' style = 'top:126px;left:120px;width:54px;height:12px'></div>
				<div class = 'clear' id = 'CharIntLabel' style = 'top:126px;left:18px;width:60px;height:12px'>Intelligence</div>
				<div class = 'clear' id = 'CharStrField' style = 'top:144px;left:120px;width:54px;height:12px'></div>
				<div class = 'clear' id = 'CharStrLabel' style = 'top:144px;left:18px;width:60px;height:12px'>Strength</div>
				<div class = 'clear' id = 'CharAgiField' style = 'top:162px;left:120px;width:54px;height:12px'></div>
				<div class = 'clear' id = 'CharAgiLabel' style = 'top:162px;left:18px;width:60px;height:12px'>Agility</div>
				<div class = 'clear' id = 'CharConField' style = 'top:180px;left:120px;width:54px;height:12px'></div>
				<div class = 'clear' id = 'CharConLabel' style = 'top:180px;left:18px;width:60px;height:12px'>Constitution</div>
				<div class = 'clear' id = 'CharChaField' style = 'top:216px;left:120px;width:54px;height:12px'></div>
				<div class = 'clear' id = 'CharChaLabel' style = 'top:216px;left:18px;width:60px;height:12px'>Charisma</div>
				<div class = 'clear' id = 'CharEndField' style = 'top:234px;left:120px;width:54px;height:12px'></div>
				<div class = 'clear' id = 'CharEndLabel' style = 'top:234px;left:18px;width:60px;height:12px'>Endurance</div>
				<div class = 'clear' id = 'CharSpdField' style = 'top:198px;left:120px;width:54px;height:12px'></div>
				<div class = 'clear' id = 'CharSpdLabel' style = 'top:198px;left:18px;width:60px;height:12px'>Speed</div>
				<div class = 'clear' id = 'CharAttackField' style = 'top:30px;left:318px;width:54px;height:12px'></div>
				<div class = 'clear' id = 'CharAttackLabel' style = 'top:30px;left:258px;width:48px;height:12px'>Attack</div>
				<div class = 'clear' id = 'CharDefenseField' style = 'top:48px;left:318px;width:54px;height:12px'></div>
				<div class = 'clear' id = 'CharDefenseLabel' style = 'top:48px;left:258px;width:48px;height:12px'>Defense</div>
				<div class = 'clear' id = 'CharHealthField' style = 'top:66px;left:66px;width:36px;height:12px'></div>
				<div class = 'clear' id = 'CharHealthLabel' style = 'top:66px;left:18px;width:36px;height:12px'>Health</div>
				<div class = 'clear' id = 'CharManaField' style = 'top:84px;left:192px;width:30px;height:12px'></div>
				<div class = 'clear' id = 'CharManaLabel' style = 'top:84px;left:132px;width:30px;height:12px'>Mana</div>
				<div class = 'clear' id = 'CharMCDField' style = 'top:84px;left:318px;width:54px;height:12px'></div>
				<div class = 'clear' id = 'CharMCDLabel' style = 'top:84px;left:258px;width:60px;height:12px'>MCD</div>
				<div class = 'clear' id = 'CharACDField' style = 'top:66px;left:318px;width:54px;height:12px'></div>
				<div class = 'clear' id = 'CharACDLabel' style = 'top:66px;left:258px;width:60px;height:12px'>ACD</div>
				<div class = 'clear' id = 'CharEquippedLabel' style = 'top:108px;left:174px;width:48px;height:12px'>Equipped</div>
				<div class = 'clear' id = 'CharHeadLabel' style = 'top:162px;left:174px;width:54px;height:12px'>Head</div>
				<div class = 'clear' id = 'CharBodyLabel' style = 'top:180px;left:174px;width:54px;height:12px'>Body</div>
				<div class = 'clear' id = 'CharLegsLabel' style = 'top:216px;left:174px;width:54px;height:12px'>Legs</div>
				<div class = 'clear' id = 'CharArmsLabel' style = 'top:198px;left:174px;width:54px;height:12px'>Arms</div>
				<div class = 'clear' id = 'CharFeetLabel' style = 'top:234px;left:174px;width:54px;height:12px'>Feet</div>
				<div class = 'clear' id = 'CharLeftHandLabel' style = 'top:126px;left:174px;width:66px;height:12px'>Left Hand</div>
				<div class = 'clear' id = 'CharRightHandLabel' style = 'top:144px;left:174px;width:84px;height:12px'>Right Hand</div>
				<div class = 'clear' id = 'CharFeetField' style = 'top:234px;left:252px;width:126px;height:12px'></div>
				<div class = 'clear' id = 'CharHeadField' style = 'top:162px;left:252px;width:126px;height:12px'></div>
				<div class = 'clear' id = 'CharBodyField' style = 'top:180px;left:252px;width:126px;height:12px'></div>
				<div class = 'clear' id = 'CharLegsField' style = 'top:216px;left:252px;width:126px;height:12px'></div>
				<div class = 'clear' id = 'CharArmsField' style = 'top:198px;left:252px;width:126px;height:12px'></div>
				<div class = 'clear' id = 'CharLeftHandField' style = 'top:126px;left:252px;width:126px;height:12px'></div>
				<div class = 'clear' id = 'CharRightHandField' style = 'top:144px;left:252px;width:126px;height:12px'></div>
			</div>
			<div id = "InvSheetButton" class = "box" onClick="ToggleInvSheet();" style = 'top:5px;left:86px;width:80px;height:18px;text-align:center;background-color:#d9baff'>Inventory</div>
			<div id = "InvSheetBox">
			</div>
			<div id = "SpellsSheetButton" class = "box" onClick="ToggleSpellsSheet();" style = 'top:5px;left:166px;width:80px;height:18px;text-align:center;background-color:#d9baff'>Spells</div>
			<div id = "SpellSheetBox">
			</div>
			<div id = "TargetBox" class = "box" style = "top:85%;left:60%;height:60px;width:240px;background-color:#adc4ff">
				<div class = 'clear' id = 'NameField' style = 'top:6px;left:6px;width:117px;height:12px'></div>
				<div class = 'clear' id = 'LevelLabel' style = 'top:6px;left:114px;width:54px;height:12px'>Level</div>
				<div class = 'clear' id = 'LevelField' style = 'top:6px;left:170px;width:27px;height:12px'></div>
				<div class = 'clear' id = 'AttackLabel' style = 'top:24px;left:6px;width:45px;height:12px'>Attack</div>
				<div class = 'clear' id = 'AttackField' style = 'top:24px;left:52px;width:27px;height:12px'></div>
				<div class = 'clear' id = 'DefenseLabel' style = 'top:24px;left:114px;width:54px;height:12px'>Defense</div>
				<div class = 'clear' id = 'DefenseField' style = 'top:24px;left:170px;width:27px;height:12px'></div>
				<div class = 'clear' id = 'HealthLabel' style = 'top:42px;left:6px;width:45px;height:12px'>Health</div>
				<div class = 'clear' id = 'HealthField' style = 'top:42px;left:52px;width:54px;height:12px'></div>
				<div class = 'clear' id = 'ManaLabel' style = 'top:42px;left:114px;width:45px;height:12px'>Mana</div>
				<div class = 'clear' id = 'ManaField' style = 'top:42px;left:170px;width:54px;height:12px'></div>
			</div>
			<div class = "clear" id = "ConViewPort" style = "top:70%;left5%;width:35%;height:25%;overflow:hidden">
				<div class = "clear" id = "Con" style = "color:#ffd326"></div>
			</div>
			<input onClick = "QuitGame();" value="Quit" type= "button" style = "top:2%;left:95%">
		</div>

		<div id = "Splash" class = "box" style = "top:10%;left:10%;width:80%;height:80%">
			<div class = "clear" style = "top:40%;left:35%;width:20%;height:5%">
				Username:&nbsp; <input id="u" type = "text">
			</div>
			<div class = "clear" style = "top:45%;left:35%;width:20%;height:5%">
				Password:&nbsp;&nbsp; <input id="p" type = "password">
			</div>
			
			<input onClick = 'Login("New");' type = "button" value="New Account" style = "top:50%;left:40%;width:15%">
			<input onClick = 'Login("Login");' type = "button" value="Login" style = "top:50%;left:55%;width:15%">
		</div>

		<div id = "AccountView" class = "box" style = "top:10%;left:10%;width:80%;height:80%">
			<div id = "NewChar" class = "box" style = "top:10%;left:10%;height:60%;width:60%;font-size:1em;visibility:hidden;background-color:#c0e5cd;z-index:100">
				<!--Input Traits-->
				<div class="clear"  class="clear" style="top:1%;left:10%">Name <input id="charName" type="text"></div>
				<div class="clear"  style="top:9%;left:10%">Class 	
					<select id="charClass">
						<option value="Fighter">Fighter</option>
						<option value="Mage">Mage</option>
						<option value="Ranger">Ranger</option>
						<option value="Thief">Thief</option>
					</select>
				</div>
				<div class="clear"  style="top:9%;left:50%">Race
					<select id="charRace">
						<option value="Elf">Elf</option>
						<option value="Dwarf">Dwarf</option>
						<option value="Human">Human</option>
						<option value="Hobbit">Hobbit</option>
					</select>
				</div>
				<div class="clear"  style="top:1%;left:70%">Sex
					<select id="charSex">
						<option value="Male">Male</option>
						<option value="Female">Female</option>
					</select>
				</div>
					
				<!--Roll Traits-->
				<div class="clear"  style="top:20%;left:10%;width:80%"><b>Base Traits</b></div>
				<div class="clear"  style="top:24%;left:10%;width:80%">Intelligence <input id="charInt" type="text" style="width:20%;left:50%;height:70%;height:70%" disabled></div>
				<div class="clear"  style="top:28%;left:10%;width:80%">Strength <input id="charStr" type="text" style="width:20%;left:50%;height:70%"  disabled></div>
				<div class="clear"  style="top:32%;left:10%;width:80%">Agility <input id="charAgi" type="text" style="width:20%;left:50%;height:70%"  disabled></div>
				<div class="clear"  style="top:36%;left:10%;width:80%">Constitution <input id="charCon" type="text" style="width:20%;left:50%;height:70%"  disabled></div>
				<div class="clear"  style="top:40%;left:10%;width:80%">Speed <input id="charSpd" type="text" style="width:20%;left:50%;height:70%"  disabled></div>
				<div class="clear"  style="top:44%;left:10%;width:80%">Charisma <input id="charCha" type="text" style="width:20%;left:50%;height:70%"  disabled></div>
				<div class="clear"  style="top:48%;left:10%;width:80%">Endurance <input id="charEnd" type="text" style="width:20%;left:50%;height:70%"  disabled></div>
				
				<!--Derived Traits-->
				<div class="clear"  style="top:55%;left:10%;width:80%"><b>Derived Traits</b></div>
				<div class="clear"  style="top:59%;left:10%;width:80%">Health <input id="charHealth" type="text" style="width:20%;left:50%;height:70%"  disabled></div>
				<div class="clear"  style="top:63%;left:10%;width:80%">Mana <input id="charMana" type="text" style="width:20%;left:50%;height:70%"  disabled></div>
				<div class="clear"  style="top:67%;left:10%;width:80%">Attack <input id="charAttack" type="text" style="width:20%;left:50%;height:70%"  disabled></div>
				<div class="clear"  style="top:71%;left:10%;width:80%">Defense <input id="charDefense" type="text" style="width:20%;left:50%;height:70%"  disabled></div>
				<div class="clear"  style="top:75%;left:10%;width:80%">Action Cooldown <input id="charACD" type="text" style="width:20%;left:50%;height:70%"  disabled></div>
				<div class="clear"  style="top:79%;left:10%;width:80%">Magic Cooldown <input id="charMCD" type="text" style="width:20%;left:50%;height:70%"  disabled></div>
				
				<!--Control Buttons-->
				
				<input onClick = "RollStats();" type = "button" value="Roll Stats" style = "top:90%;left:4%;width:20%">
				<input onClick = "ClearChar();" type = "button" value="Clear" style = "top:90%;left:28%;width:20%">
				<input onClick = "Cancel();" type = "button" value="Cancel" style = "top:90%;left:52%;width:20%">
				<input onClick = "Create();" type = "button" value="Create" style = "top:90%;left:76%;width:20%">

				
			</div>
			<div id = "CharacterBox" class = "clear" style = "top:10%;left:10%;height:60%;width:60%;font-size:1.5em">
				<div id = "char1" onClick = "SetChar(1);" class = "box" style = "top:2%;left:5%;width:90%;height:16%">
					<input id = "charID1" type = "hidden" value = "">
					<div id = "name1" class = "clear" style="top:5%;left:5%;width:50%;height:45%"></div>
					<div id = "level1" class = "clear" style="top:5%;left:60%;width:35%;height:45%"></div>
					<div id = "race1" class = "clear" style="top:50%;left:5%;width:45%;height:45%"></div>
					<div id = "class1" class = "clear" style="top:50%;left:50%;width:45%;height:45%"></div>
				</div>
				<div id = "char2" onClick = "SetChar(2);" class = "box" style = "top:22%;left:5%;width:90%;height:16%">
					<input id = "charID2" type = "hidden" value = "">
					<div id = "name2" class = "clear" style="top:5%;left:5%;width:50%;height:45%"></div>
					<div id = "level2" class = "clear" style="top:5%;left:60%;width:35%;height:45%"></div>
					<div id = "race2" class = "clear" style="top:50%;left:5%;width:45%;height:45%"></div>
					<div id = "class2" class = "clear" style="top:50%;left:50%;width:45%;height:45%"></div>
				</div>				
				<div id = "char3" onClick = "SetChar(3);" class = "box" style = "top:42%;left:5%;width:90%;height:16%">
					<input id = "charID3" type = "hidden" value = "">
					<div id = "name3" class = "clear" style="top:5%;left:5%;width:50%;height:45%"></div>
					<div id = "level3" class = "clear" style="top:5%;left:60%;width:35%;height:45%"></div>
					<div id = "race3" class = "clear" style="top:50%;left:5%;width:45%;height:45%"></div>
					<div id = "class3" class = "clear" style="top:50%;left:50%;width:45%;height:45%"></div>
				</div>				
				<div id = "char4" onClick = "SetChar(4);" class = "box" style = "top:62%;left:5%;width:90%;height:16%">
					<input id = "charID4" type = "hidden" value = "">
					<div id = "name4" class = "clear" style="top:5%;left:5%;width:50%;height:45%"></div>
					<div id = "level4" class = "clear" style="top:5%;left:60%;width:35%;height:45%"></div>
					<div id = "race4" class = "clear" style="top:50%;left:5%;width:45%;height:45%"></div>
					<div id = "class4" class = "clear" style="top:50%;left:50%;width:45%;height:45%"></div>
				</div>				
				<div id = "char5" onClick = "SetChar(5);" class = "box" style = "top:82%;left:5%;width:90%;height:16%">
					<input id = "charID5" type = "hidden" value = "">
					<div id = "name5" class = "clear" style="top:5%;left:5%;width:50%;height:45%"></div>
					<div id = "level5" class = "clear" style="top:5%;left:60%;width:35%;height:45%"></div>
					<div id = "race5" class = "clear" style="top:50%;left:5%;width:45%;height:45%"></div>
					<div id = "class5" class = "clear" style="top:50%;left:50%;width:45%;height:45%"></div>
				</div>
			</div>
			<input onClick = "EnterGame();" type = "button" value="Play" style = "top:75%;left:12%;width:16%">
			<input onClick = "NewCharacter();" type = "button" value="New Character" style = "top:75%;left:32%;width:16%">
			<input onClick = "DeleteCharacter();" type = "button" value="Delete Character" style = "top:75%;left:52%;width:16%">
			<input onClick = "Logout();" type = "button" value="Logout" style = "top:75%;left:72%;width:16%">
			

		</div>
		<div class = "box" id="DebugDiv" style = "top:82%;left:10%;width:80%;height:14%;visibility:hidden">
			Debug
		</div>
	</div>
</body>

</html>
